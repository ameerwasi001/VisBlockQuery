<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Blockly Demo: Generating JavaScript</title>
    <script src="./libs/blockly_compressed.js"></script>
    <script src="./libs/blocks_compressed.js"></script>
    <script src="./libs/javascript_compressed.js"></script>
    <script src="./libs/en.js"></script>
    <script src="./blocks/globals.js"></script>
    <script src="./blocks/objects.js"></script>
    <script src="./blocks/pattern.js"></script>
    <script src="./blocks/query.js"></script>
    <script src="./generators/objects.js"></script>
    <script src="./generators/pattern.js"></script>
    <script src="./generators/query.js"></script>
    <script src="./app.js" defer></script>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div id="root">
        <section id="blocklyContainer">
            <section class="section1">
                <div id="blocklyDiv"></div>
            </section>
            <section class="section2">
                <div id="compiledOutput" readonly>
                    <pre id="code"></pre>
                    <div id="last-btn">
                        <a class="round-btn" href="#">Run</a>
                    </div>
                </div>
            </section>
        </section>
    </div>

    <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
        <category name="Logic" colour="%{BKY_LOGIC_HUE}">
            <block type="logic_compare"></block>
            <block type="logic_operation"></block>
            <block type="logic_negate"></block>
            <block type="logic_boolean"></block>
        </category>
        <category name="Math" colour="%{BKY_MATH_HUE}">
            <block type="math_number">
                <field name="NUM">123</field>
            </block>
            <block type="math_arithmetic"></block>
            <block type="math_single"></block>
        </category>
        <category name="Text" colour="%{BKY_TEXTS_HUE}">
            <block type="text"></block>
            <block type="text_length"></block>
        </category>
        <category name="Objects" colour="290">
            <block type="obj">
                <statement name="PAIRS">
                    <block type="pattern_field">
                        <field name="KEY">name</field>
                    </block>
                </statement>
            </block>
            <block type="property"></block>
            <block type="pattern_field">
                <field name="KEY">name</field>
                <value name="VALUE">
                    <block type="text">
                        <field name="TEXT">Victoria</field>
                    </block>
                </value>
            </block>
        </category>
        <category name="Pattern" colour="1">
            <block type="pattern_regex">
                <value name="REGEX">
                    <block type="text">
                        <field name="TEXT">.*</field>
                    </block>
                </value>
                <value name="COMPLETE">
                    <block type="logic_boolean"></block>
                </value>
            </block>
            <block type="pattern_block"></block>
            <block type="no_name_predicate_block"></block>
            <block type="pattern_num"></block>
            <block type="pattern_str"></block>
            <block type="pattern_arr"></block>
            <block type="pattern_or"></block>
            <block type="pattern_any"></block>
            <block type="variable_underscore_get"></block>
            <block type="variables_get"></block>
        </category>
        <category name="Query" colour="190">
            <block type="query"></block>
            <block type="index">
                <value name="INDEX">
                    <block type="math_number"></block>
                </value>
            </block>
            <block type="v">
                <value name="PATTERN">
                    <block type="pattern_block">
                        <value name="OBJ">
                            <block type="obj"></block>
                        </value>
                    </block>
                </value>
            </block>
            <block type="vs">
                <value name="PATTERN">
                    <block type="pattern_block">
                        <value name="OBJ">
                            <block type="obj"></block>
                        </value>
                    </block>
                </value>
            </block>
            <block type="filter">
                <value name="PATTERN">
                    <block type="pattern_block">
                        <value name="OBJ">
                            <block type="obj"></block>
                        </value>
                    </block>
                </value>
            </block>
            <block type="relatesTo">
                <field name="REL"></field>
                <value name="PATTERN">
                    <block type="pattern_block">
                        <value name="OBJ">
                            <block type="obj"></block>
                        </value>
                    </block>
                </value>
            </block>
            <block type="dfs">
                <field name="REL"></field>
            </block>
            <block type="take">
                <value name="TAKE">
                    <block type="math_number"></block>
                </value>
            </block>
            <block type="tag"></block>
            <block type="hasTag"></block>
            <block type="fromTag"></block>
            <block type="outs"></block>
            <block type="ins"></block>
            <block type="unique"></block>
            <block type="union">
                <value name="QUERY">
                    <block type="query"></block>               
                </value>
            </block>
            <block type="intersect">
                <value name="QUERY">
                    <block type="query"></block>                    
                </value>
            </block>
            <block type="difference">
                <value name="QUERY">
                    <block type="query"></block>                    
                </value>
            </block>
        </category>
    </xml>

    <xml xmlns="https://developers.google.com/blockly/xml" id="startBlocks" style="display: none">
        <block type="query">
            <field name="DB_NAME"></field>
            <statement name="QUERY">
                <block type="vs">
                    <value name="PATTERN">
                        <block type="pattern_block">
                            <value name="OBJ">
                                <block type="obj">
                                    <statement name="PAIRS">
                                        <block type="pattern_field">
                                            <field name="KEY">name</field>
                                            <value name="VALUE">
                                                <block type="text">
                                                    <field name="TEXT">Victoria</field>
                                                </block>
                                            </value>
                                        </block>
                                    </statement>
                                    <statement name="PAIRS">
                                        <block type="pattern_field">
                                            <field name="KEY">age</field>
                                            <value name="VALUE">
                                                <block type="pattern_num">
                                                    <block type="predicate_block"></block>
                                                </block>
                                            </value>
                                        </block>
                                    </statement>
                                </block>
                            </value>    
                        </block>
                    </value>
                </block>    
            </statement>
        </block>
    </xml>

</body>

</html>